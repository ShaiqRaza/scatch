const mongoose = require("mongoose");
const debug = require('debug')('development:mongooseConnection')

;(async ()=>{
    try {
        if(process.env.NODE_ENV=="development")            
            process.env.MONGODB_URI = "mongodb://localhost:27017";
        await mongoose.connect(`${process.env.MONGODB_URI}/scatch`)
        .then(()=>{
            debug("Database connected!");
            console.log("connected")
        })
        .catch((err)=>{
            debug("Database not connected! ", err);
            console.log("not connected")
        })
    } catch(err) {
        console.log(err.message)
    }
})()

module.exports = mongoose.connection;